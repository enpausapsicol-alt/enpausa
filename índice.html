<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="description" content="EnPausa - Herramienta de bienestar emocional. Frases para estr√©s laboral, ansiedad y espiritualidad con recordatorios y ejercicios de respiraci√≥n.">
<meta name="theme-color" content="#2d5a3d">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üåø</text></svg>">
<title>üåø EnPausa</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=Nunito:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --forest: #2d5a3d;
  --forest-light: #3a7a52;
  --sage: #7fa88b;
  --mint: #b8d4c3;
  --cream: #f5f0e8;
  --warm: #e8ddd0;
  --sand: #d4c5b2;
  --text: #2a2a28;
  --text-soft: #5a5a56;
  --ocean: #3a6b8a;
  --ocean-light: #5a8dad;
  --lavender: #7a6b8a;
  --lavender-light: #9a8baa;
  --glow: rgba(127, 168, 139, 0.15);
  --radius: 16px;
  --radius-sm: 10px;
  --shadow: 0 8px 32px rgba(45, 90, 61, 0.12);
  --shadow-lg: 0 16px 48px rgba(45, 90, 61, 0.18);
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  font-family: 'Nunito', sans-serif;
  background: var(--cream);
  min-height: 100vh;
  min-height: 100dvh;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 16px;
  position: relative;
  overflow-x: hidden;
}

/* Fondo con textura sutil */
body::before {
  content: '';
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background:
    radial-gradient(ellipse 60% 50% at 20% 80%, rgba(45,90,61,0.06) 0%, transparent 70%),
    radial-gradient(ellipse 50% 40% at 80% 20%, rgba(58,107,138,0.05) 0%, transparent 70%),
    radial-gradient(ellipse 70% 60% at 50% 50%, rgba(122,107,138,0.03) 0%, transparent 70%);
  z-index: 0;
  pointer-events: none;
}

.container {
  background: rgba(255, 255, 255, 0.85);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255,255,255,0.6);
  border-radius: 24px;
  padding: 36px 28px;
  max-width: 440px;
  width: 100%;
  box-shadow: var(--shadow-lg);
  position: relative;
  z-index: 1;
}

/* LOGO */
.logo {
  text-align: center;
  margin-bottom: 28px;
}

.logo h1 {
  font-family: 'DM Serif Display', serif;
  color: var(--forest);
  font-size: 2.2em;
  font-weight: 400;
  letter-spacing: 0.5px;
  margin-bottom: 6px;
}

.logo p {
  color: var(--text-soft);
  font-size: 0.9em;
  font-weight: 500;
  letter-spacing: 0.3px;
}

/* SECCIONES */
.section { display: none; }
.section.active {
  display: block;
  animation: fadeIn 0.4s ease-out;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

/* BOTONES DE CATEGOR√çA */
.category-buttons {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-top: 8px;
}

.btn {
  padding: 16px 22px;
  font-size: 1em;
  font-family: 'Nunito', sans-serif;
  font-weight: 600;
  border: none;
  border-radius: var(--radius);
  cursor: pointer;
  transition: all 0.25s ease;
  text-align: center;
  letter-spacing: 0.2px;
  position: relative;
  overflow: hidden;
}

.btn:active { transform: scale(0.97); }

.btn-laboral {
  background: linear-gradient(135deg, var(--forest) 0%, var(--forest-light) 100%);
  color: white;
}
.btn-laboral:hover {
  box-shadow: 0 6px 20px rgba(45,90,61,0.35);
  transform: translateY(-2px);
}

.btn-ansiedad {
  background: linear-gradient(135deg, var(--ocean) 0%, var(--ocean-light) 100%);
  color: white;
}
.btn-ansiedad:hover {
  box-shadow: 0 6px 20px rgba(58,107,138,0.35);
  transform: translateY(-2px);
}

.btn-espiritualidad {
  background: linear-gradient(135deg, var(--lavender) 0%, var(--lavender-light) 100%);
  color: white;
}
.btn-espiritualidad:hover {
  box-shadow: 0 6px 20px rgba(122,107,138,0.35);
  transform: translateY(-2px);
}

.btn-musica {
  background: linear-gradient(135deg, #8a6b5a 0%, #aa8b7a 100%);
  color: white;
}
.btn-musica:hover {
  box-shadow: 0 6px 20px rgba(138,107,90,0.35);
  transform: translateY(-2px);
}

/* SECCI√ìN M√öSICA */
.music-grid {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-top: 12px;
}

.music-card {
  background: linear-gradient(145deg, var(--cream) 0%, var(--warm) 100%);
  border: 1px solid rgba(212,197,178,0.4);
  border-radius: var(--radius);
  padding: 16px 18px;
  cursor: pointer;
  transition: all 0.25s ease;
  display: flex;
  align-items: center;
  gap: 14px;
}

.music-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 16px rgba(45,90,61,0.1);
}

.music-card.playing {
  border-color: var(--forest-light);
  background: linear-gradient(145deg, rgba(127,168,139,0.12) 0%, rgba(184,212,195,0.15) 100%);
}

.music-icon {
  width: 46px;
  height: 46px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.3em;
  flex-shrink: 0;
}

.music-icon.piano { background: linear-gradient(135deg, #d4c5b2, #e8ddd0); }
.music-icon.guitar { background: linear-gradient(135deg, #c3cfe2, #dce6f0); }
.music-icon.ambient { background: linear-gradient(135deg, #b8d4c3, #d0e8da); }
.music-icon.strings { background: linear-gradient(135deg, #d4c1d8, #e8dcea); }

.music-info {
  flex: 1;
  min-width: 0;
}

.music-title {
  font-weight: 600;
  color: var(--text);
  font-size: 0.95em;
  margin-bottom: 2px;
}

.music-desc {
  color: var(--text-soft);
  font-size: 0.8em;
}

.music-play-btn {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: var(--forest);
  color: white;
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.9em;
  flex-shrink: 0;
  transition: all 0.2s;
}

.music-play-btn:hover {
  background: var(--forest-light);
  transform: scale(1.08);
}

/* Player activo */
.music-player-bar {
  background: var(--forest);
  border-radius: var(--radius);
  padding: 16px 20px;
  margin-top: 14px;
  display: none;
  animation: fadeIn 0.3s ease;
}

.music-player-bar.active { display: block; }

.player-info {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 10px;
}

.player-track-name {
  color: white;
  font-weight: 600;
  font-size: 0.9em;
}

.player-controls {
  display: flex;
  gap: 8px;
  align-items: center;
}

.player-btn {
  background: rgba(255,255,255,0.15);
  border: none;
  color: white;
  width: 34px;
  height: 34px;
  border-radius: 50%;
  cursor: pointer;
  font-size: 0.85em;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.2s;
}

.player-btn:hover { background: rgba(255,255,255,0.25); }
.player-btn.active-btn { background: rgba(255,255,255,0.3); }

.volume-slider {
  -webkit-appearance: none;
  appearance: none;
  width: 100%;
  height: 4px;
  border-radius: 4px;
  background: rgba(255,255,255,0.2);
  outline: none;
}

.volume-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 14px;
  height: 14px;
  border-radius: 50%;
  background: white;
  cursor: pointer;
}

.volume-slider::-moz-range-thumb {
  width: 14px;
  height: 14px;
  border-radius: 50%;
  background: white;
  cursor: pointer;
  border: none;
}

/* Separador de secci√≥n */
.music-divider {
  display: flex;
  align-items: center;
  gap: 10px;
  margin: 20px 0 12px;
  color: var(--text-soft);
  font-size: 0.85em;
  font-weight: 600;
}

.music-divider::before,
.music-divider::after {
  content: '';
  flex: 1;
  height: 1px;
  background: var(--sand);
}

/* Links externos */
.external-links {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.external-link {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 14px 16px;
  border-radius: var(--radius-sm);
  text-decoration: none;
  transition: all 0.2s;
  border: 1px solid var(--sand);
  background: white;
}

.external-link:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.06);
}

.external-link-icon {
  font-size: 1.5em;
  flex-shrink: 0;
}

.external-link-text {
  flex: 1;
}

.external-link-title {
  color: var(--text);
  font-weight: 600;
  font-size: 0.9em;
}

.external-link-desc {
  color: var(--text-soft);
  font-size: 0.78em;
}

/* TARJETA DE FRASE */
.phrase-card {
  background: linear-gradient(145deg, var(--cream) 0%, var(--warm) 100%);
  padding: 36px 28px;
  border-radius: 20px;
  margin: 16px 0;
  text-align: center;
  min-height: 180px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 1px solid rgba(212, 197, 178, 0.4);
  position: relative;
}

.phrase-card::before {
  content: '"';
  position: absolute;
  top: 12px;
  left: 20px;
  font-family: 'DM Serif Display', serif;
  font-size: 3em;
  color: var(--sage);
  opacity: 0.3;
  line-height: 1;
}

.phrase-text {
  font-family: 'DM Serif Display', serif;
  font-size: 1.3em;
  color: var(--text);
  line-height: 1.55;
  font-weight: 400;
}

.phrase-counter {
  text-align: center;
  color: var(--text-soft);
  font-size: 0.8em;
  margin-top: 8px;
  opacity: 0.6;
}

.btn-next {
  background: var(--forest);
  color: white;
  margin-top: 12px;
  width: 100%;
}
.btn-next:hover {
  background: var(--forest-light);
  box-shadow: 0 6px 20px rgba(45,90,61,0.3);
  transform: translateY(-2px);
}

.btn-breathe {
  background: transparent;
  color: var(--ocean);
  border: 2px solid var(--ocean);
  margin-top: 10px;
  width: 100%;
}
.btn-breathe:hover {
  background: var(--ocean);
  color: white;
  transform: translateY(-2px);
}

.btn-secondary {
  background: var(--cream);
  color: var(--text-soft);
  margin-top: 10px;
  width: 100%;
  border: 1px solid var(--sand);
}
.btn-secondary:hover {
  background: var(--warm);
  transform: translateY(-1px);
}

.btn-share {
  background: transparent;
  color: var(--sage);
  font-size: 0.85em;
  padding: 10px;
  margin-top: 6px;
  width: 100%;
}
.btn-share:hover { color: var(--forest); }

/* EJERCICIO DE RESPIRACI√ìN */
.breathe-section {
  text-align: center;
  padding: 20px 0;
}

.breathe-circle-container {
  position: relative;
  width: 200px;
  height: 200px;
  margin: 24px auto;
}

.breathe-circle {
  width: 200px;
  height: 200px;
  border-radius: 50%;
  background: radial-gradient(circle, var(--mint) 0%, var(--sage) 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: transform 4s ease-in-out;
  box-shadow: 0 0 40px rgba(127,168,139,0.3);
}

.breathe-circle.inhale {
  transform: scale(1.3);
  box-shadow: 0 0 60px rgba(127,168,139,0.5);
}

.breathe-circle.exhale {
  transform: scale(0.8);
  box-shadow: 0 0 20px rgba(127,168,139,0.2);
}

.breathe-text {
  font-family: 'DM Serif Display', serif;
  color: white;
  font-size: 1.2em;
  text-shadow: 0 1px 4px rgba(0,0,0,0.15);
}

.breathe-instruction {
  color: var(--text-soft);
  font-size: 0.95em;
  margin-top: 16px;
  font-weight: 500;
}

.breathe-counter {
  color: var(--sage);
  font-size: 0.85em;
  margin-top: 8px;
}

.btn-stop {
  background: var(--warm);
  color: var(--text-soft);
  margin-top: 20px;
  width: 100%;
  border: 1px solid var(--sand);
}
.btn-stop:hover {
  background: var(--sand);
}

/* CONFIGURACI√ìN */
.settings {
  margin-top: 24px;
  padding-top: 20px;
  border-top: 1px solid var(--sand);
}

.settings h3 {
  color: var(--forest);
  font-family: 'DM Serif Display', serif;
  font-weight: 400;
  margin-bottom: 16px;
  font-size: 1.05em;
}

.toggle-container {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin: 14px 0;
}

.toggle-label {
  color: var(--text);
  font-size: 0.92em;
  font-weight: 500;
}

.toggle-switch {
  position: relative;
  width: 52px;
  height: 28px;
  background: var(--sand);
  border-radius: 28px;
  cursor: pointer;
  transition: background 0.3s;
  flex-shrink: 0;
}

.toggle-switch.active { background: var(--forest-light); }

.toggle-switch::after {
  content: '';
  position: absolute;
  width: 22px;
  height: 22px;
  background: white;
  border-radius: 50%;
  top: 3px;
  left: 3px;
  transition: left 0.3s;
  box-shadow: 0 1px 4px rgba(0,0,0,0.15);
}

.toggle-switch.active::after { left: 27px; }

/* NOTIFICACI√ìN */
.notification {
  position: fixed;
  top: 20px;
  right: 20px;
  background: white;
  padding: 18px 22px;
  border-radius: var(--radius);
  box-shadow: var(--shadow-lg);
  max-width: 300px;
  z-index: 1000;
  transform: translateX(400px);
  opacity: 0;
  transition: all 0.4s ease;
  border-left: 4px solid var(--forest);
}

.notification.show {
  transform: translateX(0);
  opacity: 1;
}

.notification h3 {
  font-family: 'DM Serif Display', serif;
  color: var(--forest);
  margin-bottom: 6px;
  font-size: 1.05em;
  font-weight: 400;
}

.notification p {
  color: var(--text-soft);
  font-size: 0.88em;
  line-height: 1.4;
}

.notification-close {
  position: absolute;
  top: 8px;
  right: 10px;
  background: none;
  border: none;
  color: var(--text-soft);
  cursor: pointer;
  font-size: 1.1em;
  padding: 4px;
  opacity: 0.5;
}
.notification-close:hover { opacity: 1; }

/* VERSION */
.version {
  text-align: center;
  margin-top: 20px;
  color: var(--sand);
  font-size: 0.75em;
  letter-spacing: 0.5px;
}

/* RESPONSIVE */
@media (max-width: 480px) {
  .container { padding: 28px 20px; border-radius: 20px; }
  .logo h1 { font-size: 1.9em; }
  .phrase-text { font-size: 1.15em; }
  .notification { right: 12px; left: 12px; max-width: none; }
}
</style>
</head>
<body>

<div class="container">
  <div class="logo">
    <h1>üåø EnPausa</h1>
    <p>Herramienta para tu bienestar emocional</p>
  </div>

  <!-- INICIO -->
  <div id="home" class="section active">
    <div class="category-buttons">
      <button class="btn btn-laboral" onclick="showCategory('laboral')">
        üíº Estr√©s Laboral
      </button>
      <button class="btn btn-ansiedad" onclick="showCategory('ansiedad')">
        üß† Ansiedad
      </button>
      <button class="btn btn-espiritualidad" onclick="showCategory('espiritualidad')">
        ‚ú® Espiritualidad
      </button>
      <button class="btn btn-musica" onclick="showSection('music')">
        üéµ M√∫sica Relajante
      </button>
    </div>

    <div class="settings">
      <h3>‚öôÔ∏è Configuraci√≥n</h3>
      <div class="toggle-container">
        <span class="toggle-label">Recordatorios cada 4 horas</span>
        <div class="toggle-switch" id="reminderToggle" role="switch" aria-label="Activar recordatorios" onclick="toggleReminders()"></div>
      </div>
    </div>

    <div class="version">EnPausa v2.1</div>
  </div>

  <!-- FRASES -->
  <div id="phrases" class="section">
    <div class="phrase-card">
      <p class="phrase-text" id="currentPhrase"></p>
    </div>
    <p class="phrase-counter" id="phraseCounter"></p>
    <button class="btn btn-next" onclick="nextPhrase()">üîÑ Siguiente frase</button>
    <button class="btn btn-breathe" onclick="startBreathing()">ü´Å Ejercicio de respiraci√≥n</button>
    <button class="btn btn-share" onclick="sharePhrase()">üì§ Compartir frase</button>
    <button class="btn btn-secondary" onclick="goHome()">‚Üê Volver al inicio</button>
  </div>

  <!-- RESPIRACI√ìN -->
  <div id="breathing" class="section">
    <div class="breathe-section">
      <h3 style="font-family:'DM Serif Display',serif; color:var(--forest); font-weight:400; font-size:1.2em; margin-bottom:4px;">Ejercicio de respiraci√≥n</h3>
      <p style="color:var(--text-soft); font-size:0.85em;">Sigue el ritmo del c√≠rculo</p>

      <div class="breathe-circle-container">
        <div class="breathe-circle" id="breatheCircle">
          <span class="breathe-text" id="breatheText">Preparado</span>
        </div>
      </div>

      <p class="breathe-instruction" id="breatheInstruction">Presiona iniciar cuando est√©s listo/a</p>
      <p class="breathe-counter" id="breatheCounter"></p>

      <button class="btn btn-next" id="breatheStartBtn" onclick="toggleBreathing()">‚ñ∂Ô∏è Iniciar</button>
      <button class="btn btn-secondary" onclick="stopBreathingAndGoBack()">‚Üê Volver a las frases</button>
    </div>
  </div>

  <!-- M√öSICA -->
  <div id="music" class="section">
    <h3 style="font-family:'DM Serif Display',serif; color:var(--forest); font-weight:400; font-size:1.2em; text-align:center; margin-bottom:4px;">üéµ M√∫sica Relajante</h3>
    <p style="color:var(--text-soft); font-size:0.85em; text-align:center; margin-bottom:8px;">Escucha y rel√°jate</p>

    <div class="music-grid">
      <div class="music-card" id="track-piano" onclick="playTrack('piano')">
        <div class="music-icon piano">üéπ</div>
        <div class="music-info">
          <div class="music-title">Piano Din√°mico</div>
          <div class="music-desc">Melod√≠as alegres y fluidas</div>
        </div>
        <button class="music-play-btn" id="playBtn-piano">‚ñ∂</button>
      </div>

      <div class="music-card" id="track-guitar" onclick="playTrack('guitar')">
        <div class="music-icon guitar">üé∏</div>
        <div class="music-info">
          <div class="music-title">Guitarra Ac√∫stica</div>
          <div class="music-desc">Acordes c√°lidos y tranquilos</div>
        </div>
        <button class="music-play-btn" id="playBtn-guitar">‚ñ∂</button>
      </div>

      <div class="music-card" id="track-ambient" onclick="playTrack('ambient')">
        <div class="music-icon ambient">üåä</div>
        <div class="music-info">
          <div class="music-title">Ambiente Calma</div>
          <div class="music-desc">Texturas sonoras envolventes</div>
        </div>
        <button class="music-play-btn" id="playBtn-ambient">‚ñ∂</button>
      </div>

      <div class="music-card" id="track-strings" onclick="playTrack('strings')">
        <div class="music-icon strings">üéª</div>
        <div class="music-info">
          <div class="music-title">Cuerdas Suaves</div>
          <div class="music-desc">Viol√≠n y chelo relajantes</div>
        </div>
        <button class="music-play-btn" id="playBtn-strings">‚ñ∂</button>
      </div>
    </div>
<div class="music-card" onclick="playExternalAudio()">
  <div class="music-icon ambient">üéôÔ∏è</div>
  <div class="music-info">
    <div class="music-title">Gu√≠a: Pausa consciente</div>
    <div class="music-desc">Audio guiado por EnPausa</div>
  </div>
  <button class="music-play-btn">‚ñ∂</button>
</div>
    <!-- Player -->
    <div class="music-player-bar" id="musicPlayer">
      <div class="player-info">
        <span class="player-track-name" id="playerTrackName">‚Äî</span>
        <div class="player-controls">
          <button class="player-btn" onclick="toggleMute()" id="muteBtn">üîä</button>
          <button class="player-btn active-btn" onclick="stopAllMusic()">‚èπ</button>
        </div>
      </div>
      <input type="range" class="volume-slider" id="volumeSlider" min="0" max="100" value="60" oninput="setVolume(this.value)">
    </div>

    <!-- Links externos -->
    <div class="music-divider">Playlists en Spotify</div>
    <div class="external-links">
      <a class="external-link" href="https://open.spotify.com/playlist/2ODMZHnO9zcajVJ54Rlhz7" target="_blank" rel="noopener">
        <span class="external-link-icon">üü¢</span>
        <div class="external-link-text">
          <div class="external-link-title">Relaxing Piano ü¶¢</div>
          <div class="external-link-desc">Piano suave y calmante ¬∑ 598K seguidores</div>
        </div>
      </a>
      <a class="external-link" href="https://open.spotify.com/playlist/37i9dQZF1DWSADWNdZfn11" target="_blank" rel="noopener">
        <span class="external-link-icon">üü¢</span>
        <div class="external-link-text">
          <div class="external-link-title">Relaxing Piano Covers</div>
          <div class="external-link-desc">Covers instrumentales populares ¬∑ 224K seguidores</div>
        </div>
      </a>
      <a class="external-link" href="https://open.spotify.com/playlist/0YMAHSt06t6feGXAuLiLqI" target="_blank" rel="noopener">
        <span class="external-link-icon">üü¢</span>
        <div class="external-link-text">
          <div class="external-link-title">Instrumental Classics 2025</div>
          <div class="external-link-desc">Cl√°sicos instrumentales relajantes ¬∑ 175K seguidores</div>
        </div>
      </a>
      <a class="external-link" href="https://www.youtube.com/results?search_query=piano+instrumental+relajante+para+trabajar" target="_blank" rel="noopener">
        <span class="external-link-icon">üî¥</span>
        <div class="external-link-text">
          <div class="external-link-title">YouTube</div>
          <div class="external-link-desc">Videos de piano instrumental relajante</div>
        </div>
      </a>
    </div>

    <button class="btn btn-secondary" onclick="stopAllMusic(); goHome();" style="margin-top:16px;">‚Üê Volver al inicio</button>
  </div>
</div>

<!-- NOTIFICACI√ìN -->
<div id="notification" class="notification">
  <button class="notification-close" onclick="hideNotification()">‚úï</button>
  <h3>üåø Es momento de una pausa</h3>
  <p id="notificationText">Recuerda respirar y cuidar de ti mismo/a.</p>
</div>

<script>
// ========== FRASES (corregidas, ampliadas, sin duplicados) ==========
const phrases = {
  laboral: [
    "Respira, no todo depende de ti.",
    "Haz una pausa. Est√°s haciendo lo mejor que puedes.",
    "No te afanes. Respira, la soluci√≥n est√° en tu mente.",
    "Cierra los ojos por un momento y respira profundo.",
    "Respira. A√∫n en el cansancio, eres capaz.",
    "Respira. Puedes avanzar paso a paso.",
    "Suelta un instante. No tienes que cargar con todo.",
    "Detente. Tu mente tambi√©n necesita descanso.",
    "Haz una pausa. El descanso tambi√©n es productividad.",
    "Tu valor no se mide por tu productividad de hoy.",
    "Antes de resolver, respira. La claridad llega con calma.",
    "No necesitas tener todo resuelto ahora mismo.",
    "Perm√≠tete hacer una cosa a la vez.",
    "Tu bienestar es m√°s importante que cualquier plazo."
  ],
  ansiedad: [
    "Conf√≠a. Este momento no define todo tu camino.",
    "No te sientas mal por sentirte as√≠. Es v√°lido.",
    "Cierra los ojos, respira y deja pasar este instante.",
    "Haz silencio interior. Lo importante se ordena con calma.",
    "Respira. Puedes avanzar paso a paso, sin prisa.",
    "Conf√≠a. No est√°s solo/a en este proceso.",
    "Respira profundo. Hoy tambi√©n es suficiente.",
    "Conf√≠a. Incluso aqu√≠, est√°s aprendiendo.",
    "Este momento pasar√°. Los dif√≠ciles siempre pasan.",
    "No tienes que controlar todo. Solo respira.",
    "Tu mente necesita gentileza, no exigencia.",
    "Est√°s aqu√≠. Est√°s presente. Eso ya es mucho.",
    "Perm√≠tete sentir sin juzgarte.",
    "La ansiedad miente. T√∫ eres m√°s fuerte de lo que crees."
  ],
  espiritualidad: [
    "Respira. Dios tambi√©n cuida lo que hoy te preocupa.",
    "Ten fe. Todo mejorar√°, pues corregiste tu camino.",
    "Respira. A√∫n en el cansancio, Dios te sostiene.",
    "Haz silencio interior. Dios habla en la calma.",
    "Conf√≠a. No est√°s solo/a. Dios camina contigo.",
    "Respira. Haz tu parte y deja lo dem√°s en manos de Dios.",
    "Deja todo en manos de Dios. √âl tiene el control.",
    "La paz de Dios sobrepasa todo entendimiento.",
    "√âl conoce tu coraz√≥n. Descansa en su amor.",
    "No temas. Dios ya prepar√≥ tu camino.",
    "Conf√≠a en sus tiempos. Son perfectos.",
    "En la quietud encontrar√°s su voz."
  ]
};

// ========== FRASES DE NOTIFICACI√ìN ==========
const notificationPhrases = [
  "Recuerda respirar y cuidar de ti mismo/a.",
  "Tu bienestar importa. T√≥mate un momento.",
  "Haz una pausa. Tu mente te lo agradecer√°.",
  "Un respiro a tiempo cambia tu d√≠a.",
  "Detente un momento. Mereces esta pausa."
];

// ========== ESTADO ==========
let currentCategory = '';
let currentPhraseIndex = 0;
let remindersEnabled = false;
let reminderInterval = null;
let demoTimeout = null;
let breathingActive = false;
let breathingInterval = null;
let breathCycles = 0;

// ========== CARGAR ESTADO GUARDADO ==========
function loadState() {
  try {
    const saved = localStorage.getItem('enpausa_reminders');
    if (saved !== null) {
      remindersEnabled = saved === 'true';
    } else {
      remindersEnabled = true; // Por defecto activado la primera vez
    }
  } catch(e) {
    remindersEnabled = true;
  }
  
  const toggle = document.getElementById('reminderToggle');
  if (remindersEnabled) {
    toggle.classList.add('active');
    startReminders();
  } else {
    toggle.classList.remove('active');
  }
}

function saveState() {
  try {
    localStorage.setItem('enpausa_reminders', remindersEnabled.toString());
  } catch(e) {}
}

// ========== NAVEGACI√ìN ==========
function showSection(sectionId) {
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.getElementById(sectionId).classList.add('active');
}

function showCategory(category) {
  currentCategory = category;
  currentPhraseIndex = Math.floor(Math.random() * phrases[category].length);
  showSection('phrases');
  displayPhrase();
}

function goHome() {
  stopBreathing();
  showSection('home');
}

// ========== FRASES ==========
function displayPhrase() {
  const el = document.getElementById('currentPhrase');
  const list = phrases[currentCategory];
  el.style.opacity = '0';
  el.style.transform = 'translateY(6px)';
  
  setTimeout(() => {
    el.textContent = list[currentPhraseIndex];
    document.getElementById('phraseCounter').textContent = 
      `${currentPhraseIndex + 1} de ${list.length}`;
    el.style.transition = 'all 0.3s ease';
    el.style.opacity = '1';
    el.style.transform = 'translateY(0)';
  }, 150);
}

function nextPhrase() {
  const list = phrases[currentCategory];
  currentPhraseIndex = (currentPhraseIndex + 1) % list.length;
  displayPhrase();
}

// ========== COMPARTIR ==========
function sharePhrase() {
  const phrase = phrases[currentCategory][currentPhraseIndex];
  const text = `"${phrase}" ‚Äî EnPausa üåø`;
  
  if (navigator.share) {
    navigator.share({ text: text }).catch(() => {});
  } else {
    navigator.clipboard.writeText(text).then(() => {
      const btn = document.querySelector('.btn-share');
      const original = btn.textContent;
      btn.textContent = '‚úÖ Copiada al portapapeles';
      setTimeout(() => { btn.textContent = original; }, 2000);
    }).catch(() => {});
  }
}

// ========== RECORDATORIOS (corregidos) ==========
function toggleReminders() {
  remindersEnabled = !remindersEnabled;
  const toggle = document.getElementById('reminderToggle');
  
  if (remindersEnabled) {
    toggle.classList.add('active');
    startReminders();
    requestNotificationPermission();
  } else {
    toggle.classList.remove('active');
    stopReminders();
  }
  saveState();
}

function startReminders() {
  stopReminders();
  
  // Recordatorio cada 4 horas
  reminderInterval = setInterval(() => {
    if (remindersEnabled) showNotification();
  }, 14400000);
  
  // Demo: mostrar uno a los 15 segundos (cancelable)
  demoTimeout = setTimeout(() => {
    if (remindersEnabled) showNotification();
  }, 15000);
}

function stopReminders() {
  if (reminderInterval) {
    clearInterval(reminderInterval);
    reminderInterval = null;
  }
  if (demoTimeout) {
    clearTimeout(demoTimeout);
    demoTimeout = null;
  }
}

function showNotification() {
  // Notificaci√≥n in-app
  const randomPhrase = notificationPhrases[Math.floor(Math.random() * notificationPhrases.length)];
  document.getElementById('notificationText').textContent = randomPhrase;
  const notification = document.getElementById('notification');
  notification.classList.add('show');
  
  setTimeout(() => { hideNotification(); }, 6000);
  
  // Notificaci√≥n del sistema si est√° disponible
  if ('Notification' in window && Notification.permission === 'granted') {
    try {
      new Notification('üåø EnPausa', {
        body: randomPhrase,
        icon: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y=".9em" font-size="90">üåø</text></svg>'
      });
    } catch(e) {}
  }
}

function hideNotification() {
  document.getElementById('notification').classList.remove('show');
}

function requestNotificationPermission() {
  if ('Notification' in window && Notification.permission === 'default') {
    Notification.requestPermission();
  }
}

// ========== RESPIRACI√ìN ==========
function startBreathing() {
  showSection('breathing');
  breathCycles = 0;
  updateBreathCounter();
  const circle = document.getElementById('breatheCircle');
  circle.className = 'breathe-circle';
  document.getElementById('breatheText').textContent = 'Preparado';
  document.getElementById('breatheInstruction').textContent = 'Presiona iniciar cuando est√©s listo/a';
  document.getElementById('breatheStartBtn').textContent = '‚ñ∂Ô∏è Iniciar';
  breathingActive = false;
}

function toggleBreathing() {
  if (breathingActive) {
    stopBreathing();
    document.getElementById('breatheText').textContent = 'Pausado';
    document.getElementById('breatheInstruction').textContent = 'Presiona iniciar para continuar';
    document.getElementById('breatheStartBtn').textContent = '‚ñ∂Ô∏è Continuar';
  } else {
    breathingActive = true;
    document.getElementById('breatheStartBtn').textContent = '‚è∏Ô∏è Pausar';
    runBreathCycle();
  }
}

function runBreathCycle() {
  if (!breathingActive) return;
  
  const circle = document.getElementById('breatheCircle');
  const text = document.getElementById('breatheText');
  const instruction = document.getElementById('breatheInstruction');
  
  // Inhalar (4s)
  circle.className = 'breathe-circle inhale';
  text.textContent = 'Inhala';
  instruction.textContent = 'Respira profundo por la nariz...';
  
  setTimeout(() => {
    if (!breathingActive) return;
    // Sostener (4s)
    text.textContent = 'Sost√©n';
    instruction.textContent = 'Mant√©n el aire...';
    
    setTimeout(() => {
      if (!breathingActive) return;
      // Exhalar (4s)
      circle.className = 'breathe-circle exhale';
      text.textContent = 'Exhala';
      instruction.textContent = 'Suelta el aire lentamente...';
      
      setTimeout(() => {
        if (!breathingActive) return;
        breathCycles++;
        updateBreathCounter();
        runBreathCycle(); // Siguiente ciclo
      }, 4000);
    }, 4000);
  }, 4000);
}

function stopBreathing() {
  breathingActive = false;
  const circle = document.getElementById('breatheCircle');
  circle.className = 'breathe-circle';
}

function stopBreathingAndGoBack() {
  stopBreathing();
  showSection('phrases');
}

function updateBreathCounter() {
  document.getElementById('breatheCounter').textContent = 
    breathCycles > 0 ? `Ciclos completados: ${breathCycles}` : '';
}

// ========== INICIALIZAR ==========
loadState();

// ========== M√öSICA - Web Audio API ==========
let audioCtx = null;
let currentTrack = null;
let musicNodes = {};
let musicVolume = 0.6;
let isMuted = false;
let masterGain = null;

function getAudioContext() {
  if (!audioCtx) {
    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    masterGain = audioCtx.createGain();
    masterGain.gain.value = musicVolume;
    masterGain.connect(audioCtx.destination);
  }
  if (audioCtx.state === 'suspended') audioCtx.resume();
  return audioCtx;
}

// Generadores de m√∫sica procedural
const trackGenerators = {
  piano: function(ctx, master) {
    // Piano m√°s r√°pido y din√°mico con melod√≠as alegres
    const notes = [261.63, 293.66, 329.63, 349.23, 392.00, 440.00, 493.88, 523.25, 587.33, 659.25]; // C4-E5
    const bassNotes = [130.81, 146.83, 164.81, 174.61, 196.00, 220.00]; // C3-A3
    const melodies = [
      [0, 2, 4, 7, 9, 7, 4, 2, 0, 4, 7, 9, 7, 4, 2, 0],
      [4, 5, 7, 9, 7, 5, 4, 2, 4, 7, 9, 7, 5, 4, 2, 0],
      [0, 4, 7, 5, 9, 7, 4, 2, 0, 2, 4, 7, 9, 7, 4, 2],
      [7, 9, 7, 5, 4, 2, 0, 2, 4, 5, 7, 9, 7, 5, 4, 2],
      [2, 4, 5, 7, 9, 7, 5, 4, 2, 0, 2, 4, 7, 5, 4, 2],
      [0, 7, 4, 9, 5, 7, 2, 4, 0, 5, 7, 9, 4, 7, 2, 0]
    ];
    let playing = true;
    let timeouts = [];

    function playNote(freq, time, duration, vol) {
      const osc = ctx.createOscillator();
      const osc2 = ctx.createOscillator();
      const gain = ctx.createGain();
      const filter = ctx.createBiquadFilter();
      
      // Doble oscilador para un piano m√°s rico
      osc.type = 'sine';
      osc.frequency.value = freq;
      osc2.type = 'sine';
      osc2.frequency.value = freq * 2.01; // Arm√≥nico leve
      
      filter.type = 'lowpass';
      filter.frequency.value = 3500;
      filter.Q.value = 1;
      
      const v = vol || 0.1;
      gain.gain.setValueAtTime(0, ctx.currentTime + time);
      gain.gain.linearRampToValueAtTime(v, ctx.currentTime + time + 0.02);
      gain.gain.setValueAtTime(v * 0.7, ctx.currentTime + time + 0.1);
      gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + time + duration);
      
      osc.connect(filter);
      osc2.connect(filter);
      filter.connect(gain);
      gain.connect(master);
      
      osc.start(ctx.currentTime + time);
      osc.stop(ctx.currentTime + time + duration);
      osc2.start(ctx.currentTime + time);
      osc2.stop(ctx.currentTime + time + duration);
    }

    function playMelody() {
      if (!playing) return;
      const melody = melodies[Math.floor(Math.random() * melodies.length)];
      const tempo = 0.28 + Math.random() * 0.07; // R√°pido y variado
      
      melody.forEach((noteIdx, i) => {
        const octave = Math.random() > 0.3 ? 1 : 2;
        const freq = notes[noteIdx] * octave;
        const vel = 0.06 + Math.random() * 0.06;
        playNote(freq, i * tempo, 0.8 + Math.random() * 0.5, vel);
        
        // Bajo cada 4 notas
        if (i % 4 === 0) {
          const bassIdx = Math.floor(Math.random() * bassNotes.length);
          playNote(bassNotes[bassIdx], i * tempo, 1.5, 0.04);
        }
      });
      
      const t = setTimeout(() => playMelody(), melody.length * tempo * 1000 + 200);
      timeouts.push(t);
    }

    playMelody();
    return { stop: () => { playing = false; timeouts.forEach(clearTimeout); } };
  },

  guitar: function(ctx, master) {
    const chords = [
      [196.00, 246.94, 293.66, 392.00],  // G
      [220.00, 261.63, 329.63, 440.00],  // Am
      [174.61, 220.00, 261.63, 349.23],  // F
      [261.63, 329.63, 392.00, 523.25],  // C
      [164.81, 196.00, 246.94, 329.63],  // Em
    ];
    let playing = true;
    let timeouts = [];

    function pluck(freq, startTime, dur) {
      const osc = ctx.createOscillator();
      const osc2 = ctx.createOscillator();
      const gain = ctx.createGain();
      const filter = ctx.createBiquadFilter();
      
      osc.type = 'triangle';
      osc2.type = 'sine';
      osc.frequency.value = freq;
      osc2.frequency.value = freq * 1.002;
      
      filter.type = 'lowpass';
      filter.frequency.value = 2200;
      filter.Q.value = 0.5;
      
      const t = startTime;
      gain.gain.setValueAtTime(0, ctx.currentTime + t);
      gain.gain.linearRampToValueAtTime(0.07, ctx.currentTime + t + 0.01);
      gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + t + dur);
      
      osc.connect(filter);
      osc2.connect(filter);
      filter.connect(gain);
      gain.connect(master);
      
      osc.start(ctx.currentTime + t);
      osc.stop(ctx.currentTime + t + dur);
      osc2.start(ctx.currentTime + t);
      osc2.stop(ctx.currentTime + t + dur);
    }

    function arpeggio(chord, startTime) {
      const pattern = Math.random() > 0.5 
        ? [0, 1, 2, 3, 2, 1, 0, 3] 
        : [0, 2, 1, 3, 0, 3, 2, 1];
      const speed = 0.18 + Math.random() * 0.06;
      pattern.forEach((idx, i) => {
        pluck(chord[idx], startTime + i * speed, 1.2);
      });
    }

    function playLoop() {
      if (!playing) return;
      const progression = [0, 4, 2, 3, 1];
      const chordDur = 1.8;
      progression.forEach((chordIdx, i) => {
        arpeggio(chords[chordIdx], i * chordDur);
      });
      const t = setTimeout(() => playLoop(), progression.length * chordDur * 1000 + 300);
      timeouts.push(t);
    }

    playLoop();
    return { stop: () => { playing = false; timeouts.forEach(clearTimeout); } };
  },

  ambient: function(ctx, master) {
    let playing = true;
    const oscs = [];
    let timeouts = [];

    function createDrone(freq, detune) {
      const osc = ctx.createOscillator();
      const gain = ctx.createGain();
      const filter = ctx.createBiquadFilter();
      
      osc.type = 'sine';
      osc.frequency.value = freq;
      osc.detune.value = detune;
      
      filter.type = 'lowpass';
      filter.frequency.value = 800;
      
      gain.gain.value = 0.035;
      
      // LFO para movimiento
      const lfo = ctx.createOscillator();
      const lfoGain = ctx.createGain();
      lfo.frequency.value = 0.08 + Math.random() * 0.15;
      lfoGain.gain.value = 0.018;
      lfo.connect(lfoGain);
      lfoGain.connect(gain.gain);
      lfo.start();
      
      // Filtro LFO para m√°s movimiento
      const filterLfo = ctx.createOscillator();
      const filterLfoGain = ctx.createGain();
      filterLfo.frequency.value = 0.03 + Math.random() * 0.08;
      filterLfoGain.gain.value = 400;
      filterLfo.connect(filterLfoGain);
      filterLfoGain.connect(filter.frequency);
      filterLfo.start();
      
      osc.connect(filter);
      filter.connect(gain);
      gain.connect(master);
      osc.start();
      
      oscs.push(osc, lfo, filterLfo);
    }

    // Shimmer notes que aparecen y desaparecen
    function shimmer() {
      if (!playing) return;
      const freqs = [523.25, 659.25, 783.99, 880.00, 1046.50];
      const freq = freqs[Math.floor(Math.random() * freqs.length)];
      const osc = ctx.createOscillator();
      const gain = ctx.createGain();
      const filter = ctx.createBiquadFilter();
      
      osc.type = 'sine';
      osc.frequency.value = freq;
      filter.type = 'lowpass';
      filter.frequency.value = 1200;
      
      const dur = 3 + Math.random() * 4;
      gain.gain.setValueAtTime(0, ctx.currentTime);
      gain.gain.linearRampToValueAtTime(0.015, ctx.currentTime + dur * 0.4);
      gain.gain.linearRampToValueAtTime(0, ctx.currentTime + dur);
      
      osc.connect(filter);
      filter.connect(gain);
      gain.connect(master);
      osc.start();
      osc.stop(ctx.currentTime + dur);
      
      const t = setTimeout(() => shimmer(), (2 + Math.random() * 3) * 1000);
      timeouts.push(t);
    }

    createDrone(130.81, 0);
    createDrone(196.00, 5);
    createDrone(261.63, -3);
    createDrone(329.63, 7);
    shimmer();

    return { 
      stop: () => { 
        playing = false; 
        timeouts.forEach(clearTimeout);
        oscs.forEach(o => { try { o.stop(); } catch(e) {} }); 
      } 
    };
  },

  strings: function(ctx, master) {
    let playing = true;
    const oscs = [];
    let timeouts = [];
    
    const notes = [261.63, 293.66, 329.63, 349.23, 392.00, 440.00, 493.88];
    const phrases = [
      [0, 2, 4, 5, 4, 2],
      [4, 5, 6, 4, 2, 0],
      [2, 4, 5, 4, 2, 0],
      [5, 4, 2, 4, 5, 6]
    ];
    
    function playNote(freq, startTime, duration) {
      const osc = ctx.createOscillator();
      const osc2 = ctx.createOscillator();
      const gain = ctx.createGain();
      const filter = ctx.createBiquadFilter();
      
      osc.type = 'sawtooth';
      osc2.type = 'sawtooth';
      osc.frequency.value = freq;
      osc2.frequency.value = freq * 1.003;
      
      filter.type = 'lowpass';
      filter.frequency.value = 1400;
      filter.Q.value = 0.8;
      
      gain.gain.setValueAtTime(0, ctx.currentTime + startTime);
      gain.gain.linearRampToValueAtTime(0.035, ctx.currentTime + startTime + 0.8);
      gain.gain.setValueAtTime(0.03, ctx.currentTime + startTime + duration * 0.6);
      gain.gain.linearRampToValueAtTime(0, ctx.currentTime + startTime + duration);
      
      // Vibrato
      const vib = ctx.createOscillator();
      const vibGain = ctx.createGain();
      vib.frequency.value = 5.5;
      vibGain.gain.value = 2.5;
      vib.connect(vibGain);
      vibGain.connect(osc.frequency);
      vibGain.connect(osc2.frequency);
      vib.start(ctx.currentTime + startTime);
      vib.stop(ctx.currentTime + startTime + duration);
      
      osc.connect(filter);
      osc2.connect(filter);
      filter.connect(gain);
      gain.connect(master);
      osc.start(ctx.currentTime + startTime);
      osc.stop(ctx.currentTime + startTime + duration);
      osc2.start(ctx.currentTime + startTime);
      osc2.stop(ctx.currentTime + startTime + duration);
      
      oscs.push(osc, osc2);
    }

    function playPhrase() {
      if (!playing) return;
      const phrase = phrases[Math.floor(Math.random() * phrases.length)];
      const noteDur = 1.8 + Math.random() * 0.5;
      
      // Melod√≠a alta
      phrase.forEach((noteIdx, i) => {
        playNote(notes[noteIdx], i * noteDur * 0.6, noteDur);
      });
      
      // Bajo sostenido
      const bassNote = notes[phrase[0]] * 0.5;
      playNote(bassNote, 0, phrase.length * noteDur * 0.6);
      
      const t = setTimeout(() => playPhrase(), phrase.length * noteDur * 600 + 800);
      timeouts.push(t);
    }

    playPhrase();
    return { 
      stop: () => { 
        playing = false; 
        timeouts.forEach(clearTimeout);
        oscs.forEach(o => { try { o.stop(); } catch(e) {} }); 
      } 
    };
  }
};

const trackNames = {
  piano: 'Piano Din√°mico',
  guitar: 'Guitarra Ac√∫stica',
  ambient: 'Ambiente Calma',
  strings: 'Cuerdas Suaves'
};

function playTrack(trackId) {
  const ctx = getAudioContext();
  
  // Si es el mismo track, toggle pausa
  if (currentTrack === trackId) {
    stopAllMusic();
    return;
  }
  
  // Parar track anterior
  if (musicNodes[currentTrack]) {
    musicNodes[currentTrack].stop();
    delete musicNodes[currentTrack];
  }
  
  // Quitar clase playing de todos
  document.querySelectorAll('.music-card').forEach(c => c.classList.remove('playing'));
  document.querySelectorAll('.music-play-btn').forEach(b => b.textContent = '‚ñ∂');
  
  // Iniciar nuevo track
  musicNodes[trackId] = trackGenerators[trackId](ctx, masterGain);
  currentTrack = trackId;
  
  // UI
  document.getElementById('track-' + trackId).classList.add('playing');
  document.getElementById('playBtn-' + trackId).textContent = '‚è∏';
  document.getElementById('playerTrackName').textContent = trackNames[trackId];
  document.getElementById('musicPlayer').classList.add('active');
}

function stopAllMusic() {
  if (currentTrack && musicNodes[currentTrack]) {
    musicNodes[currentTrack].stop();
    delete musicNodes[currentTrack];
  }
  currentTrack = null;
  
  document.querySelectorAll('.music-card').forEach(c => c.classList.remove('playing'));
  document.querySelectorAll('.music-play-btn').forEach(b => b.textContent = '‚ñ∂');
  document.getElementById('musicPlayer').classList.remove('active');
}

function setVolume(val) {
  musicVolume = val / 100;
  if (masterGain) masterGain.gain.value = isMuted ? 0 : musicVolume;
}

function toggleMute() {
  isMuted = !isMuted;
  if (masterGain) masterGain.gain.value = isMuted ? 0 : musicVolume;
  document.getElementById('muteBtn').textContent = isMuted ? 'üîá' : 'üîä';
}// ====== AUDIO EXTERNO ENPAUSA ======
let externalAudio = null;

function playExternalAudio() {
  const existing = document.getElementById('external-audio-box');
  if (existing) { existing.remove(); return; }

  const audioBox = document.createElement("div");
  audioBox.id = "external-audio-box";
  audioBox.style.position = "fixed";
  audioBox.style.bottom = "20px";
  audioBox.style.left = "50%";
  audioBox.style.transform = "translateX(-50%)";
  audioBox.style.zIndex = "999999";
  audioBox.style.width = "90%";
  audioBox.style.maxWidth = "420px";
  audioBox.style.padding = "15px";
  audioBox.style.background = "#ffffff";
  audioBox.style.borderRadius = "12px";
  audioBox.style.boxShadow = "0 2px 8px rgba(0,0,0,0.25)";
  audioBox.style.textAlign = "center";

  audioBox.innerHTML = `
    <p style="margin-bottom:10px; font-weight:500;">
      Gu√≠a: Pausa consciente üåø
    </p>
    <audio controls autoplay style="width:100%;">
      <source src="https://drive.google.com/uc?export=download&id=1WVOzdNHni6zWyRk-mxl33ynVevKP7knI" type="audio/mpeg">
      Tu navegador no soporta audio.
    </audio>
    <button onclick="document.getElementById('external-audio-box').remove()" style="margin-top:10px; border:none; background:none; cursor:pointer; color:#999;">‚úï Cerrar</button>
  `;

  document.body.appendChild(audioBox);
}
</script>
</body>
</html>
